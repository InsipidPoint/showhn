<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" xmlns:tal="http://xml.zope.org/namespaces/tal">
    <head>
        <title>HN Showcase</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <meta name="keywords" content="show hn hacker news ycombinator" />
        <meta name="description" content="HN Showcase" />
        <link rel="shortcut icon" href="${request.static_url('showhn:static/favicon.ico')}" />
        <link rel="stylesheet" href="${request.static_url('showhn:static/showhn.css')}" type="text/css" media="screen" charset="utf-8" />
        <link rel="stylesheet" href="${request.static_url('showhn:static/jPaginate/css/style.css')}" type="text/css" media="screen" charset="utf-8" />
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/smoothness/jquery-ui.css" type="text/css" media="screen" charset="utf-8" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js" type="text/javascript"></script>
        <script src="${request.static_url('showhn:static/jPaginate/jquery.paginate.js')}" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('.time').each(function(index) {
                    var dt = new Date($(this).text());
                    var hs = dt.getHours();
                    if (hs <= 9)
                        hs = '0'+hs;
                    var ms = dt.getMinutes();
                    if (ms <= 9)
                        ms = '0'+ms;
                    var dateString = ''+dt.getFullYear()+'-'+(dt.getMonth()+1)+'-'+dt.getDate()+' '+hs+':'+ms;
                    $(this).html(dateString);
                });

                $('.radio').buttonset();
                $('.radio').change(function() {
                    window.location.replace('/view?sort='+$('input:checked','#radio1').attr('id')+'+'+$('input:checked','#radio2').attr('id')+'&page=1');
                });

                $('.page').paginate({count:${pages},
                    start:${current},
				display: 15,
				border					: false,
				text_color  			: '#888',
				background_color    	: '#EEE',	
				text_hover_color  		: 'black',
                background_hover_color	: '#CFCFCF',
                onChange:function(page){
window.location.replace('/view?sort='+$('input:checked','#radio1').attr('id')+'+'+$('input:checked','#radio2').attr('id')+'&page='+page);
                }
                    });
            });
        </script>
</head>
<body>
    <div id="wrapper">
    <div id="header">
        <span id="titletext"><b>HN Showcase</b></span>
        <form>
            <div id="radio1" class="radio">
                <input type="radio" id="create_ts" name="radio1" ${create_ts} /><label for="create_ts">Date</label>
                <input type="radio" id="points" name="radio1" ${points} /><label for="points">Points</label>
                <input type="radio" id="num_comments" name="radio1" ${num_comments} /><label for="num_comments">Comments</label>
            </div>
        </form>
        <form>
            <div id="radio2" class="radio">
                <input type="radio" id="asc" name="radio2" ${asc} /><label for="asc">Ascending</label>
                <input type="radio" id="desc" name="radio2" ${desc} /><label for="desc">Descending</label>
            </div>
        </form>
       <div style="clear:both;"></div> 
    </div>
    <div id="content">
        <div class="page_wrapper">
            <div class="page"></div>
        </div>
        <div id="posts">
            <div tal:repeat="post posts" class="postwrapper">
                <div id="${post['id']}" class="post">
                    <div class="post_image_title">
                        <div class="post_image"><img src="${image_map[post['id']]}" /></div>
                        <div class="title">${post['title'][8:]}</div>
                    </div>
                    <div class="info">
                        ${post['username']} ${post['points']}pts ${post['num_comments']}cmts @ <span class="time">${post['create_ts']}</span> 
                    </div>
                </div>
            </div> 
            <div style="clear:both;"></div>
        </div>
        <div class="page_wrapper">
            <div class="page"></div>
        </div>
    </div>
    <div id="footer">
        By Shiwei Song and Moses Nakamura
    </div>
</div>
</body>
</html>
